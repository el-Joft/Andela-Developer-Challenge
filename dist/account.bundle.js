!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=88)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){for(var n=t.split("."),o=e;n.length;){var i=n.shift().trim();if(!("object"===(void 0===o?"undefined":r(o))&&i in o))return null;o=o[i]}return o}function i(e,t){var n=e,r=o(t,n.getAttribute("tc-data-model"));"INPUT"===n.nodeName||"SELECT"===n.nodeName||"TEXTAREA"===n.nodeName?n.value=r||"":n.innerHTML=r}function u(e,t){return e.test(t)}function a(e){return function(t,n){return o(e,n)}}t.htmlToElement=function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},t.getValue=o,t.bindPropertiesToElement=function(e,t){if(!t)return;for(var n=0;n<e.length;n+=1)i(e[n],t)},t.requiresSubstitution=u,t.getSubstituteValue=a,t.formatter=function(e,t){var n=/{{([^{]*?)}}/g,r=e;u(n,e)&&(r=e.replace(n,a(t)));return r},t.stopAlertTime=c,t.showAlert=function(e,t){c();var n=document.getElementById("alert");if(!n)return;n.className="",n.classList.add("alert"),n.classList.add(t);var r=n.querySelector(".alert-msg"),o=n.querySelector(".close-btn"),i=function(){return function(){n.style.display="none"}}();r.innerHTML=e,n.style.display="block",o.onclick=i,s=setTimeout(i,8e3)},t.getFieldsAsObject=function(e){var t={};return e.querySelectorAll("input").forEach(function(e){var n=e.getAttribute("name");t[n]=e.value}),e.querySelectorAll("select").forEach(function(e){var n=e.getAttribute("name");t[n]=e.options[e.selectedIndex].value}),t},t.showToast=function(e,t){clearTimeout(l);var n=document.getElementById("toast");if(!n)return;n.className="",n.classList.add("toast");var r=n.querySelector(".alert-msg"),o=n.querySelector(".close-btn"),i=function(){return function(){n.classList.remove("show"),n.classList.add("dismiss")}}();r.innerHTML=e,n.classList.add("show"),n.classList.remove("dismiss"),n.classList.add(t),o.onclick=i,l=setTimeout(i,8e3)},t.trimDate=function(e){return e.substring(0,e.length-5).trim()};var s=null;function c(){clearTimeout(s)}var l=null},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntryUrlByID=function(e){return u+"/"+e};var r=t.baseUrl="http://localhost:3000",o=t.apiVersion="/api/v1",i=t.apiUrl=r+o,u=(t.userProfile=i+"/account/me/detailed",t.changePassword=i+"/account/change-password",t.reminderUrl=i+"/account/user/reminder/settings",t.registrationEndpoint=i+"/auth/signup",t.authenticationEndpoint=i+"/auth/login",t.entriesEndpoint=i+"/entries")},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"request",value:function(){return function(e,t,n){var r={method:e,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};return localStorage.authenticationToken&&(r.headers["X-Access-Token"]=localStorage.authenticationToken),fetch(t,r).then(function(e){var t=e.status;if(401===t&&(localStorage.clear(),location.replace("signin.html")),t<400||t>=600){var n=e.headers.get("X-Access-Token");return n&&(localStorage.authenticationToken=n),Promise.resolve(e)}return Promise.resolve(e.json()).then(function(e){return Promise.reject(new Error(e.message))})}).then(function(e){return e.json()})}}()},{key:"get",value:function(){return function(e){return this.request("GET",e)}}()},{key:"post",value:function(){return function(e,t){return this.request("POST",e,t)}}()},{key:"put",value:function(){return function(e,t){return this.request("PUT",e,t)}}()},{key:"delete",value:function(){return function(e,t){return this.request("DELETE",e,t)}}()}]),e}());t.default=o},88:function(e,t,n){"use strict";var r=n(1),o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(n(4));function u(e){for(var t=!0,n=e.querySelectorAll("input"),o=n.length-1;o>=0;o-=1){var i=n[o],u=i.value;"password"!==i.type&&(u=u.trim()),""===u&&(i.className+=" invalid",t=!1,(0,r.showAlert)("Input Field(s) cannot be empty","error"),i.focus(),i.oninput=function(e){e.target.classList.remove("invalid")})}return t}function a(e){e.preventDefault();var t=document.getElementById("signupForm");if(u(t)&&function(e){var t=!0,n=e.querySelector("#match-password");if(n){var o=e.querySelector("#password");n.value!==o.value&&((0,r.showAlert)("Please input a matching password","error"),t=!1)}return t}(t)){var n=(0,r.getFieldsAsObject)(t);i.default.post(o.registrationEndpoint,n).then(function(){(0,r.showAlert)("Successful","success"),location.replace("dashboard.html")},function(e){var t=e.message;(0,r.showAlert)("Registration Failed:<br>"+t,"error")})}}function s(e){e&&e.preventDefault();var t=document.getElementById("signinForm");if(u(t)){var n=(0,r.getFieldsAsObject)(t);i.default.post(o.authenticationEndpoint,n).then(function(e){localStorage.authenticationToken=e.token,window.location.replace("dashboard.html")},function(e){(0,r.showAlert)("Authentication Failed, check email or password","error")})}}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("signinForm");e&&(e.onsubmit=s);var t=document.getElementById("signupForm");t&&(t.onsubmit=a)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL2VuZHBvaW50VXJsLmpzIiwid2VicGFjazovLy8uL3VpL3NyYy9mZXRjaFdyYXBwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL3NpZ25pbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldFZhbHVlIiwiY29udGV4dCIsImNvbnRleHRTdHIiLCJzcGxpdEFycmF5Iiwic3BsaXQiLCJjdXJyZW50Q29udGV4dCIsImxlbmd0aCIsIml0ZW0iLCJzaGlmdCIsInRyaW0iLCJfdHlwZW9mIiwic2V0RWxlbWVudFZhbHVlIiwidGFyZ2V0IiwibW9kZWwiLCJlbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwibm9kZU5hbWUiLCJpbm5lckhUTUwiLCJyZXF1aXJlc1N1YnN0aXR1dGlvbiIsInJlZ0V4Iiwic3RyIiwidGVzdCIsImdldFN1YnN0aXR1dGVWYWx1ZSIsInJlZ2V4TWF0Y2giLCJwbGFjZWhvbGRlciIsImh0bWxUb0VsZW1lbnQiLCJodG1sIiwidGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImJpbmRQcm9wZXJ0aWVzVG9FbGVtZW50IiwiZGF0YU1vZGVsRWxlbWVudHMiLCJmb3JtYXR0ZXIiLCJpbnB1dCIsInJlc3VsdCIsInJlcGxhY2UiLCJzdG9wQWxlcnRUaW1lIiwic2hvd0FsZXJ0IiwibXNnIiwidHlwZSIsImFsZXJ0IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJtc2dFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsb3NlRWxlbWVudCIsImNsb3NlSGFuZGxlciIsInN0eWxlIiwiZGlzcGxheSIsIm9uY2xpY2siLCJ0aW1lciIsInNldFRpbWVvdXQiLCJnZXRGaWVsZHNBc09iamVjdCIsImZvcm0iLCJkYXRhIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInNob3dUb2FzdCIsImNsZWFyVGltZW91dCIsInRvYXN0VGltZXIiLCJyZW1vdmUiLCJ0cmltRGF0ZSIsImRhdGUiLCJzdWJzdHJpbmciLCJnZXRFbnRyeVVybEJ5SUQiLCJpZCIsImVudHJpZXNFbmRwb2ludCIsImJhc2VVcmwiLCJhcGlWZXJzaW9uIiwiYXBpVXJsIiwidXNlclByb2ZpbGUiLCJjaGFuZ2VQYXNzd29yZCIsInJlbWluZGVyVXJsIiwicmVnaXN0cmF0aW9uRW5kcG9pbnQiLCJhdXRoZW50aWNhdGlvbkVuZHBvaW50IiwiaHR0cCIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJmZXRjaERhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImxvY2FsU3RvcmFnZSIsImF1dGhlbnRpY2F0aW9uVG9rZW4iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJzdGF0dXMiLCJjbGVhciIsImxvY2F0aW9uIiwidG9rZW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImpzb24iLCJyZWplY3QiLCJFcnJvciIsIm1lc3NhZ2UiLCJ0aGlzIiwicmVxdWVzdCIsIl91dGlsIiwiX2VuZHBvaW50VXJsIiwidmFsaWRhdGVGb3JtIiwidmFsaWQiLCJpbnB1dEZvcm1zIiwiaW5wdXRGb3JtIiwiZm9jdXMiLCJvbmlucHV0IiwiZSIsImNyZWF0ZUFjY291bnQiLCJwcmV2ZW50RGVmYXVsdCIsIm1hdGNoUGFzc3dvcmRFbGVtZW50IiwicGFzc3dvcmRFbGVtZW50IiwibWF0Y2hQYXNzd29yZCIsInBvc3QiLCJlcnIiLCJzaWduSW4iLCJ3aW5kb3ciLCJlcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaWduaW5Gb3JtIiwib25zdWJtaXQiLCJzaWdudXBGb3JtIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLHNTQzVFTyxTQUFTQyxFQUFTQyxFQUFTQyxHQUdoQyxJQUZBLElBQU1DLEVBQWFELEVBQVdFLE1BQU0sS0FDaENDLEVBQWlCSixFQUNkRSxFQUFXRyxRQUFRLENBQ3hCLElBQU1DLEVBQU9KLEVBQVdLLFFBQVFDLE9BQ2hDLEtBQWdDLGlCQUE1QixJQUFRSixFQUFSLFlBQUFLLEVBQVFMLEtBQWdDRSxLQUFRRixHQUdsRCxPQUFPLEtBRlBBLEVBQWlCQSxFQUFlRSxHQUtwQyxPQUFPRixFQUdULFNBQVNNLEVBQWdCQyxFQUFRQyxHQUMvQixJQUFNQyxFQUFVRixFQUVWM0IsRUFBUWUsRUFBU2EsRUFEVkMsRUFBUUMsYUFBYSxrQkFFVCxVQUFyQkQsRUFBUUUsVUFDYyxXQUFyQkYsRUFBUUUsVUFDYSxhQUFyQkYsRUFBUUUsU0FDWEYsRUFBUTdCLE1BQVFBLEdBQVMsR0FFekI2QixFQUFRRyxVQUFZaEMsRUFXakIsU0FBU2lDLEVBQXFCQyxFQUFPQyxHQUMxQyxPQUFPRCxFQUFNRSxLQUFLRCxHQUdiLFNBQVNFLEVBQW1CckIsR0FDakMsT0FBTyxTQUFDc0IsRUFBWUMsR0FBYixPQUE2QnhCLEVBQVNDLEVBQVN1QixNQTdDeENDLGNBQVQsU0FBdUJDLEdBQzVCLElBQU1DLEVBQVdDLFNBQVNDLGNBQWMsWUFFeEMsT0FEQUYsRUFBU1YsVUFBWVMsRUFBS2pCLE9BQ25Ca0IsRUFBU0csUUFBUUMsY0FHVi9CLGFBMkJBZ0Msd0JBQVQsU0FBaUNDLEVBQW1CcEIsR0FDekQsSUFBS0EsRUFBTyxPQUNaLElBQUssSUFBSTdDLEVBQUksRUFBR0EsRUFBSWlFLEVBQWtCM0IsT0FBUXRDLEdBQUssRUFDakQyQyxFQUFnQnNCLEVBQWtCakUsR0FBSTZDLE1BSTFCSyx5QkFJQUksdUJBSUFZLFVBQVQsU0FBbUJDLEVBQU9sQyxHQUMvQixJQUFNa0IsRUFBUSxnQkFDVmlCLEVBQVNELEVBQ1RqQixFQUFxQkMsRUFBT2dCLEtBQzlCQyxFQUFTRCxFQUFNRSxRQUFRbEIsRUFBT0csRUFBbUJyQixLQUVuRCxPQUFPbUMsS0FLT0Usa0JBSUFDLFVBQVQsU0FBbUJDLEVBQUtDLEdBQzdCSCxJQUNBLElBQU1JLEVBQVFkLFNBQVNlLGVBQWUsU0FDdEMsSUFBS0QsRUFBTyxPQUNaQSxFQUFNRSxVQUFZLEdBQ2xCRixFQUFNRyxVQUFVQyxJQUFJLFNBQ3BCSixFQUFNRyxVQUFVQyxJQUFJTCxHQUNwQixJQUFNTSxFQUFhTCxFQUFNTSxjQUFjLGNBQ2pDQyxFQUFlUCxFQUFNTSxjQUFjLGNBQ25DRSxhQUFBLE9BQWUsV0FDbkJSLEVBQU1TLE1BQU1DLFFBQVUsUUFEbEJGLEdBR05ILEVBQVc5QixVQUFZdUIsRUFDdkJFLEVBQU1TLE1BQU1DLFFBQVUsUUFFdEJILEVBQWFJLFFBQVVILEVBQ3ZCSSxFQUFRQyxXQUFXTCxFQUFjLFFBR25CTSxrQkFBVCxTQUEyQkMsR0FDaEMsSUFBTUMsS0FTTixPQVJBRCxFQUFLRSxpQkFBaUIsU0FBU0MsUUFBUSxTQUFDQyxHQUN0QyxJQUFNdEYsRUFBT3NGLEVBQWE5QyxhQUFhLFFBQ3ZDMkMsRUFBS25GLEdBQVFzRixFQUFhNUUsUUFFNUJ3RSxFQUFLRSxpQkFBaUIsVUFBVUMsUUFBUSxTQUFDQyxHQUN2QyxJQUFNdEYsRUFBT3NGLEVBQWE5QyxhQUFhLFFBQ3ZDMkMsRUFBS25GLEdBQVFzRixFQUFhQyxRQUFRRCxFQUFhRSxlQUFlOUUsUUFFekR5RSxLQVNPTSxVQUFULFNBQW1CeEIsRUFBS0MsR0FIN0J3QixhQUFhQyxHQUtiLElBQU14QixFQUFRZCxTQUFTZSxlQUFlLFNBQ3RDLElBQUtELEVBQU8sT0FDWkEsRUFBTUUsVUFBWSxHQUNsQkYsRUFBTUcsVUFBVUMsSUFBSSxTQUNwQixJQUFNQyxFQUFhTCxFQUFNTSxjQUFjLGNBQ2pDQyxFQUFlUCxFQUFNTSxjQUFjLGNBQ25DRSxhQUFBLE9BQWUsV0FDbkJSLEVBQU1HLFVBQVVzQixPQUFPLFFBQ3ZCekIsRUFBTUcsVUFBVUMsSUFBSSxZQUZoQkksR0FJTkgsRUFBVzlCLFVBQVl1QixFQUN2QkUsRUFBTUcsVUFBVUMsSUFBSSxRQUNwQkosRUFBTUcsVUFBVXNCLE9BQU8sV0FDdkJ6QixFQUFNRyxVQUFVQyxJQUFJTCxHQUVwQlEsRUFBYUksUUFBVUgsRUFDdkJnQixFQUFhWCxXQUFXTCxFQUFjLFFBSXhCa0IsU0FBVCxTQUFrQkMsR0FDdkIsT0FBT0EsRUFBS0MsVUFBVSxFQUFHRCxFQUFLL0QsT0FBUyxHQUFHRyxRQW5FNUMsSUFBSTZDLEVBQVEsS0FFTCxTQUFTaEIsSUFDZDJCLGFBQWFYLEdBbUNmLElBQUlZLEVBQWEsd0ZDckZESyxnQkFBVCxTQUF5QkMsR0FDOUIsT0FBVUMsRUFBVixJQUE2QkQsR0FYeEIsSUFBTUUsWUFBVSx3QkFDVkMsZUFBYSxVQUNiQyxXQUFTRixFQUFVQyxFQU1uQkYsR0FMQUksY0FBaUJELEVBQWpCLHVCQUNBRSxpQkFBb0JGLEVBQXBCLDJCQUNBRyxjQUFpQkgsRUFBakIsa0NBQ0FJLHVCQUEwQkosRUFBMUIsZUFDQUsseUJBQTRCTCxFQUE1QixjQUNBSCxrQkFBcUJHLEVBQXJCLDBWQ3NDUE0sRUFBTyw4TEE3Q0hDLEVBQVFDLEVBQUtDLEdBQ25CLElBQU1DLEdBQ0pILFNBQ0FFLEtBQU1FLEtBQUtDLFVBQVVILEdBQ3JCSSxTQUNFQyxlQUFnQixxQkFNcEIsT0FISUMsYUFBYUMsc0JBQ2ZOLEVBQVVHLFFBQVEsa0JBQW9CRSxhQUFhQyxxQkFFOUNDLE1BQU1ULEVBQUtFLEdBQ2ZRLEtBQUssU0FBQ0MsR0FBUSxJQUNMQyxFQUFXRCxFQUFYQyxPQUtSLEdBSmUsTUFBWEEsSUFDRkwsYUFBYU0sUUFDYkMsU0FBUzdELFFBQVEsZ0JBRWYyRCxFQUFTLEtBQU9BLEdBQVUsSUFBSyxDQUNqQyxJQUFNRyxFQUFRSixFQUFJTixRQUFRNUcsSUFBSSxrQkFFOUIsT0FESXNILElBQU9SLGFBQWFDLG9CQUFzQk8sR0FDdkNDLFFBQVFDLFFBQVFOLEdBRXpCLE9BQU9LLFFBQVFDLFFBQVFOLEVBQUlPLFFBQVFSLEtBQUssU0FBQXBDLEdBQUEsT0FBUTBDLFFBQVFHLE9BQU8sSUFBSUMsTUFBTTlDLEVBQUsrQyxjQUUvRVgsS0FBSyxTQUFBQyxHQUFBLE9BQU9BLEVBQUlPLDBEQUdqQmxCLEdBQ0YsT0FBT3NCLEtBQUtDLFFBQVEsTUFBT3ZCLHFEQUd4QkEsRUFBSzFCLEdBQ1IsT0FBT2dELEtBQUtDLFFBQVEsT0FBUXZCLEVBQUsxQixvREFHL0IwQixFQUFLMUIsR0FDUCxPQUFPZ0QsS0FBS0MsUUFBUSxNQUFPdkIsRUFBSzFCLHVEQUczQjBCLEVBQUsxQixHQUNWLE9BQU9nRCxLQUFLQyxRQUFRLFNBQVV2QixFQUFLMUIsMEJBS3hCd0IsbUNDL0NmLElBQUEwQixFQUFBaEosRUFBQSxHQUNBaUosRUFBQWpKLEVBQUEsdURBQ0FBLEVBQUEsSUFFQSxTQUFTa0osRUFBYXJELEdBR3BCLElBRkEsSUFBSXNELEdBQVEsRUFDTkMsRUFBYXZELEVBQUtFLGlCQUFpQixTQUNoQzNGLEVBQUlnSixFQUFXMUcsT0FBUyxFQUFHdEMsR0FBSyxFQUFHQSxHQUFLLEVBQUcsQ0FDbEQsSUFBTWlKLEVBQVlELEVBQVdoSixHQUN2QmlCLEVBQVVnSSxFQUFWaEksTUFDaUIsYUFBbkJnSSxFQUFVeEUsT0FBcUJ4RCxFQUFRQSxFQUFNd0IsUUFDbkMsS0FBVnhCLElBQ0ZnSSxFQUFVckUsV0FBYSxXQUN2Qm1FLEdBQVEsR0FDUixFQUFBSCxFQUFBckUsV0FBVSxpQ0FBa0MsU0FDNUMwRSxFQUFVQyxRQUNWRCxFQUFVRSxRQUFVLFNBQUNDLEdBQ25CQSxFQUFFeEcsT0FBT2lDLFVBQVVzQixPQUFPLGFBSWhDLE9BQU80QyxFQWdCVCxTQUFTTSxFQUFjRCxHQUNyQkEsRUFBRUUsaUJBQ0YsSUFBTTdELEVBQU83QixTQUFTZSxlQUFlLGNBQ3JDLEdBQUltRSxFQUFhckQsSUFoQm5CLFNBQXVCQSxHQUNyQixJQUFJc0QsR0FBUSxFQUNOUSxFQUF1QjlELEVBQUtULGNBQWMsbUJBQ2hELEdBQUl1RSxFQUFzQixDQUN4QixJQUFNQyxFQUFrQi9ELEVBQUtULGNBQWMsYUFDdkN1RSxFQUFxQnRJLFFBQVV1SSxFQUFnQnZJLFNBQ2pELEVBQUEySCxFQUFBckUsV0FBVSxtQ0FBb0MsU0FDOUN3RSxHQUFRLEdBR1osT0FBT0EsRUFNbUJVLENBQWNoRSxHQUFPLENBQzdDLElBQU1DLEdBQU8sRUFBQWtELEVBQUFwRCxtQkFBa0JDLEdBQy9CeUIsVUFBS3dDLEtBQUsxQyx1QkFBc0J0QixHQUFNb0MsS0FBSyxZQUN6QyxFQUFBYyxFQUFBckUsV0FBVSxhQUFjLFdBQ3hCMkQsU0FBUzdELFFBQVEsbUJBQ2hCLFNBQUNzRixHQUFRLElBQ0ZsQixFQUFZa0IsRUFBWmxCLFNBQ1IsRUFBQUcsRUFBQXJFLFdBQUEsMkJBQXFDa0UsRUFBVyxZQUt0RCxTQUFTbUIsRUFBT1IsR0FDVkEsR0FBR0EsRUFBRUUsaUJBQ1QsSUFBTTdELEVBQU83QixTQUFTZSxlQUFlLGNBQ3JDLEdBQUltRSxFQUFhckQsR0FBTyxDQUN0QixJQUFNQyxHQUFPLEVBQUFrRCxFQUFBcEQsbUJBQWtCQyxHQUMvQnlCLFVBQUt3QyxLQUFLekMseUJBQXdCdkIsR0FBTW9DLEtBQUssU0FBQ0MsR0FDNUNKLGFBQWFDLG9CQUFzQkcsRUFBSUksTUFDdkMwQixPQUFPM0IsU0FBUzdELFFBQVEsbUJBQ3ZCLFNBQUN5RixJQUNGLEVBQUFsQixFQUFBckUsV0FBVSxpREFBa0QsWUFLbEVYLFNBQVNtRyxpQkFBaUIsbUJBQW9CLFdBQzVDLElBQU1DLEVBQWFwRyxTQUFTZSxlQUFlLGNBQ3ZDcUYsSUFDRkEsRUFBV0MsU0FBV0wsR0FFeEIsSUFBTU0sRUFBYXRHLFNBQVNlLGVBQWUsY0FDdkN1RixJQUNGQSxFQUFXRCxTQUFXWiIsImZpbGUiOiJhY2NvdW50LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA4OCk7XG4iLCJleHBvcnQgZnVuY3Rpb24gaHRtbFRvRWxlbWVudChodG1sKSB7XG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbC50cmltKCk7XG4gIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0Q2hpbGQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZShjb250ZXh0LCBjb250ZXh0U3RyKSB7XG4gIGNvbnN0IHNwbGl0QXJyYXkgPSBjb250ZXh0U3RyLnNwbGl0KCcuJyk7XG4gIGxldCBjdXJyZW50Q29udGV4dCA9IGNvbnRleHQ7XG4gIHdoaWxlIChzcGxpdEFycmF5Lmxlbmd0aCkge1xuICAgIGNvbnN0IGl0ZW0gPSBzcGxpdEFycmF5LnNoaWZ0KCkudHJpbSgpO1xuICAgIGlmICh0eXBlb2YgKGN1cnJlbnRDb250ZXh0KSA9PT0gJ29iamVjdCcgJiYgaXRlbSBpbiBjdXJyZW50Q29udGV4dCkge1xuICAgICAgY3VycmVudENvbnRleHQgPSBjdXJyZW50Q29udGV4dFtpdGVtXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIHJldHVybiBjdXJyZW50Q29udGV4dDtcbn1cblxuZnVuY3Rpb24gc2V0RWxlbWVudFZhbHVlKHRhcmdldCwgbW9kZWwpIHtcbiAgY29uc3QgZWxlbWVudCA9IHRhcmdldDtcbiAgY29uc3QgZGF0YSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0Yy1kYXRhLW1vZGVsJyk7XG4gIGNvbnN0IHZhbHVlID0gZ2V0VmFsdWUobW9kZWwsIGRhdGEpO1xuICBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJ1xuICAgIHx8IGVsZW1lbnQubm9kZU5hbWUgPT09ICdTRUxFQ1QnXG4gICAgfHwgZWxlbWVudC5ub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZSB8fCAnJztcbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kUHJvcGVydGllc1RvRWxlbWVudChkYXRhTW9kZWxFbGVtZW50cywgbW9kZWwpIHtcbiAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFNb2RlbEVsZW1lbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgc2V0RWxlbWVudFZhbHVlKGRhdGFNb2RlbEVsZW1lbnRzW2ldLCBtb2RlbCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVzU3Vic3RpdHV0aW9uKHJlZ0V4LCBzdHIpIHtcbiAgcmV0dXJuIHJlZ0V4LnRlc3Qoc3RyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnN0aXR1dGVWYWx1ZShjb250ZXh0KSB7XG4gIHJldHVybiAocmVnZXhNYXRjaCwgcGxhY2Vob2xkZXIpID0+IGdldFZhbHVlKGNvbnRleHQsIHBsYWNlaG9sZGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdHRlcihpbnB1dCwgY29udGV4dCkge1xuICBjb25zdCByZWdFeCA9IC97eyhbXntdKj8pfX0vZztcbiAgbGV0IHJlc3VsdCA9IGlucHV0O1xuICBpZiAocmVxdWlyZXNTdWJzdGl0dXRpb24ocmVnRXgsIGlucHV0KSkge1xuICAgIHJlc3VsdCA9IGlucHV0LnJlcGxhY2UocmVnRXgsIGdldFN1YnN0aXR1dGVWYWx1ZShjb250ZXh0KSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubGV0IHRpbWVyID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3BBbGVydFRpbWUoKSB7XG4gIGNsZWFyVGltZW91dCh0aW1lcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93QWxlcnQobXNnLCB0eXBlKSB7XG4gIHN0b3BBbGVydFRpbWUoKTtcbiAgY29uc3QgYWxlcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcbiAgaWYgKCFhbGVydCkgcmV0dXJuO1xuICBhbGVydC5jbGFzc05hbWUgPSAnJztcbiAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQnKTtcbiAgYWxlcnQuY2xhc3NMaXN0LmFkZCh0eXBlKTtcbiAgY29uc3QgbXNnRWxlbWVudCA9IGFsZXJ0LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC1tc2cnKTtcbiAgY29uc3QgY2xvc2VFbGVtZW50ID0gYWxlcnQucXVlcnlTZWxlY3RvcignLmNsb3NlLWJ0bicpO1xuICBjb25zdCBjbG9zZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgYWxlcnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfTtcbiAgbXNnRWxlbWVudC5pbm5lckhUTUwgPSBtc2c7XG4gIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gIGNsb3NlRWxlbWVudC5vbmNsaWNrID0gY2xvc2VIYW5kbGVyO1xuICB0aW1lciA9IHNldFRpbWVvdXQoY2xvc2VIYW5kbGVyLCA4MDAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpZWxkc0FzT2JqZWN0KGZvcm0pIHtcbiAgY29uc3QgZGF0YSA9IHt9O1xuICBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGlucHV0RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBkYXRhW25hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlO1xuICB9KTtcbiAgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKS5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBuYW1lID0gaW5wdXRFbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgIGRhdGFbbmFtZV0gPSBpbnB1dEVsZW1lbnQub3B0aW9uc1tpbnB1dEVsZW1lbnQuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gIH0pO1xuICByZXR1cm4gZGF0YTtcbn1cblxubGV0IHRvYXN0VGltZXIgPSBudWxsO1xuXG5mdW5jdGlvbiBzdG9wVG9hc3RUaW1lcigpIHtcbiAgY2xlYXJUaW1lb3V0KHRvYXN0VGltZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd1RvYXN0KG1zZywgdHlwZSkge1xuICBzdG9wVG9hc3RUaW1lcigpO1xuICBjb25zdCBhbGVydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdCcpO1xuICBpZiAoIWFsZXJ0KSByZXR1cm47XG4gIGFsZXJ0LmNsYXNzTmFtZSA9ICcnO1xuICBhbGVydC5jbGFzc0xpc3QuYWRkKCd0b2FzdCcpO1xuICBjb25zdCBtc2dFbGVtZW50ID0gYWxlcnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LW1zZycpO1xuICBjb25zdCBjbG9zZUVsZW1lbnQgPSBhbGVydC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtYnRuJyk7XG4gIGNvbnN0IGNsb3NlSGFuZGxlciA9ICgpID0+IHtcbiAgICBhbGVydC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnZGlzbWlzcycpO1xuICB9O1xuICBtc2dFbGVtZW50LmlubmVySFRNTCA9IG1zZztcbiAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICBhbGVydC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNtaXNzJyk7XG4gIGFsZXJ0LmNsYXNzTGlzdC5hZGQodHlwZSk7XG5cbiAgY2xvc2VFbGVtZW50Lm9uY2xpY2sgPSBjbG9zZUhhbmRsZXI7XG4gIHRvYXN0VGltZXIgPSBzZXRUaW1lb3V0KGNsb3NlSGFuZGxlciwgODAwMCk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1EYXRlKGRhdGUpIHtcbiAgcmV0dXJuIGRhdGUuc3Vic3RyaW5nKDAsIGRhdGUubGVuZ3RoIC0gNSkudHJpbSgpO1xufVxuIiwiZXhwb3J0IGNvbnN0IGJhc2VVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJzsgLy8gJ2h0dHBzOi8vc2hpZWxkZWQtd2F0ZXJzLTk0MDA2Lmhlcm9rdWFwcC5jb20nO1xuZXhwb3J0IGNvbnN0IGFwaVZlcnNpb24gPSAnL2FwaS92MSc7XG5leHBvcnQgY29uc3QgYXBpVXJsID0gYmFzZVVybCArIGFwaVZlcnNpb247XG5leHBvcnQgY29uc3QgdXNlclByb2ZpbGUgPSBgJHthcGlVcmx9L2FjY291bnQvbWUvZGV0YWlsZWRgO1xuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkID0gYCR7YXBpVXJsfS9hY2NvdW50L2NoYW5nZS1wYXNzd29yZGA7XG5leHBvcnQgY29uc3QgcmVtaW5kZXJVcmwgPSBgJHthcGlVcmx9L2FjY291bnQvdXNlci9yZW1pbmRlci9zZXR0aW5nc2A7XG5leHBvcnQgY29uc3QgcmVnaXN0cmF0aW9uRW5kcG9pbnQgPSBgJHthcGlVcmx9L2F1dGgvc2lnbnVwYDtcbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGlvbkVuZHBvaW50ID0gYCR7YXBpVXJsfS9hdXRoL2xvZ2luYDtcbmV4cG9ydCBjb25zdCBlbnRyaWVzRW5kcG9pbnQgPSBgJHthcGlVcmx9L2VudHJpZXNgO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50cnlVcmxCeUlEKGlkKSB7XG4gIHJldHVybiBgJHtlbnRyaWVzRW5kcG9pbnR9LyR7aWR9YDtcbn1cbiIsImNsYXNzIEZldGNoV3JhcHBlciB7XG4gIHJlcXVlc3QobWV0aG9kLCB1cmwsIGJvZHkpIHtcbiAgICBjb25zdCBmZXRjaERhdGEgPSB7XG4gICAgICBtZXRob2QsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmF1dGhlbnRpY2F0aW9uVG9rZW4pIHtcbiAgICAgIGZldGNoRGF0YS5oZWFkZXJzWydYLUFjY2Vzcy1Ub2tlbiddID0gbG9jYWxTdG9yYWdlLmF1dGhlbnRpY2F0aW9uVG9rZW47XG4gICAgfVxuICAgIHJldHVybiBmZXRjaCh1cmwsIGZldGNoRGF0YSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IHJlcztcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgnc2lnbmluLmh0bWwnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzIDwgNDAwIHx8IHN0YXR1cyA+PSA2MDApIHtcbiAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlcy5oZWFkZXJzLmdldCgnWC1BY2Nlc3MtVG9rZW4nKTtcbiAgICAgICAgICBpZiAodG9rZW4pIGxvY2FsU3RvcmFnZS5hdXRoZW50aWNhdGlvblRva2VuID0gdG9rZW47XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzLmpzb24oKSkudGhlbihkYXRhID0+IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UpKSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xuICB9XG5cbiAgZ2V0KHVybCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ0dFVCcsIHVybCk7XG4gIH1cblxuICBwb3N0KHVybCwgZGF0YSkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BPU1QnLCB1cmwsIGRhdGEpO1xuICB9XG5cbiAgcHV0KHVybCwgZGF0YSkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BVVCcsIHVybCwgZGF0YSk7XG4gIH1cblxuICBkZWxldGUodXJsLCBkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnREVMRVRFJywgdXJsLCBkYXRhKTtcbiAgfVxufVxuXG5jb25zdCBodHRwID0gbmV3IEZldGNoV3JhcHBlcigpO1xuZXhwb3J0IGRlZmF1bHQgaHR0cDtcbiIsImltcG9ydCB7IGdldEZpZWxkc0FzT2JqZWN0LCBzaG93QWxlcnQgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgYXV0aGVudGljYXRpb25FbmRwb2ludCwgcmVnaXN0cmF0aW9uRW5kcG9pbnQgfSBmcm9tICcuL2VuZHBvaW50VXJsJztcbmltcG9ydCBodHRwIGZyb20gJy4vZmV0Y2hXcmFwcGVyJztcblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcbiAgbGV0IHZhbGlkID0gdHJ1ZTtcbiAgY29uc3QgaW5wdXRGb3JtcyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgZm9yIChsZXQgaSA9IGlucHV0Rm9ybXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBpbnB1dEZvcm1zW2ldO1xuICAgIGxldCB7IHZhbHVlIH0gPSBpbnB1dEZvcm07XG4gICAgaWYgKGlucHV0Rm9ybS50eXBlICE9PSAncGFzc3dvcmQnKSB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICBpbnB1dEZvcm0uY2xhc3NOYW1lICs9ICcgaW52YWxpZCc7XG4gICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgc2hvd0FsZXJ0KCdJbnB1dCBGaWVsZChzKSBjYW5ub3QgYmUgZW1wdHknLCAnZXJyb3InKTtcbiAgICAgIGlucHV0Rm9ybS5mb2N1cygpO1xuICAgICAgaW5wdXRGb3JtLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWQ7XG59XG5cbmZ1bmN0aW9uIG1hdGNoUGFzc3dvcmQoZm9ybSkge1xuICBsZXQgdmFsaWQgPSB0cnVlO1xuICBjb25zdCBtYXRjaFBhc3N3b3JkRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI21hdGNoLXBhc3N3b3JkJyk7XG4gIGlmIChtYXRjaFBhc3N3b3JkRWxlbWVudCkge1xuICAgIGNvbnN0IHBhc3N3b3JkRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3Bhc3N3b3JkJyk7XG4gICAgaWYgKG1hdGNoUGFzc3dvcmRFbGVtZW50LnZhbHVlICE9PSBwYXNzd29yZEVsZW1lbnQudmFsdWUpIHtcbiAgICAgIHNob3dBbGVydCgnUGxlYXNlIGlucHV0IGEgbWF0Y2hpbmcgcGFzc3dvcmQnLCAnZXJyb3InKTtcbiAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQWNjb3VudChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdudXBGb3JtJyk7XG4gIGlmICh2YWxpZGF0ZUZvcm0oZm9ybSkgJiYgbWF0Y2hQYXNzd29yZChmb3JtKSkge1xuICAgIGNvbnN0IGRhdGEgPSBnZXRGaWVsZHNBc09iamVjdChmb3JtKTtcbiAgICBodHRwLnBvc3QocmVnaXN0cmF0aW9uRW5kcG9pbnQsIGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgICAgc2hvd0FsZXJ0KCdTdWNjZXNzZnVsJywgJ3N1Y2Nlc3MnKTtcbiAgICAgIGxvY2F0aW9uLnJlcGxhY2UoJ2Rhc2hib2FyZC5odG1sJyk7XG4gICAgfSwgKGVycikgPT4ge1xuICAgICAgY29uc3QgeyBtZXNzYWdlIH0gPSBlcnI7XG4gICAgICBzaG93QWxlcnQoYFJlZ2lzdHJhdGlvbiBGYWlsZWQ6PGJyPiR7bWVzc2FnZX1gLCAnZXJyb3InKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaWduSW4oZSkge1xuICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25pbkZvcm0nKTtcbiAgaWYgKHZhbGlkYXRlRm9ybShmb3JtKSkge1xuICAgIGNvbnN0IGRhdGEgPSBnZXRGaWVsZHNBc09iamVjdChmb3JtKTtcbiAgICBodHRwLnBvc3QoYXV0aGVudGljYXRpb25FbmRwb2ludCwgZGF0YSkudGhlbigocmVzKSA9PiB7XG4gICAgICBsb2NhbFN0b3JhZ2UuYXV0aGVudGljYXRpb25Ub2tlbiA9IHJlcy50b2tlbjtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCdkYXNoYm9hcmQuaHRtbCcpO1xuICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgc2hvd0FsZXJ0KCdBdXRoZW50aWNhdGlvbiBGYWlsZWQsIGNoZWNrIGVtYWlsIG9yIHBhc3N3b3JkJywgJ2Vycm9yJyk7XG4gICAgfSk7XG4gIH1cbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3Qgc2lnbmluRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduaW5Gb3JtJyk7XG4gIGlmIChzaWduaW5Gb3JtKSB7XG4gICAgc2lnbmluRm9ybS5vbnN1Ym1pdCA9IHNpZ25JbjtcbiAgfVxuICBjb25zdCBzaWdudXBGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ251cEZvcm0nKTtcbiAgaWYgKHNpZ251cEZvcm0pIHtcbiAgICBzaWdudXBGb3JtLm9uc3VibWl0ID0gY3JlYXRlQWNjb3VudDtcbiAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9