!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=88)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){for(var n=t.split("."),o=e;n.length;){var i=n.shift().trim();if(!("object"===(void 0===o?"undefined":r(o))&&i in o))return null;o=o[i]}return o}function i(e,t){return e.test(t)}function u(e){return function(t,n){return o(e,n)}}t.htmlToElement=function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},t.getValue=o,t.bindPropertiesToElement=function(e,t){if(!t)return;for(var n=function(){return function(e){var n=e,r=n.getAttribute("tc-data-model"),i=o(t,r);"INPUT"===n.nodeName?n.value=i||"":n.innerHTML=i}}(),r=0;r<e.length;r+=1)n(e[r])},t.requiresSubstitution=i,t.getSubstituteValue=u,t.formatter=function(e,t){var n=/{{([^{]*?)}}/g,r=e;i(n,e)&&(r=e.replace(n,u(t)));return r},t.stopAlertTime=c,t.showAlert=function(e,t){c();var n=document.getElementById("alert");if(!n)return;n.className="",n.classList.add("alert"),n.classList.add(t);var r=n.querySelector(".alert-msg"),o=n.querySelector(".close-btn"),i=function(){return function(){n.style.display="none"}}();r.innerHTML=e,n.style.display="block",o.onclick=i,a=setTimeout(i,8e3)},t.getFieldsAsObject=function(e){var t={};return e.querySelectorAll("input").forEach(function(e){var n=e.getAttribute("name");t[n]=e.value}),e.querySelectorAll("select").forEach(function(e){var n=e.getAttribute("name");t[n]=e.options[e.selectedIndex].value}),t},t.showToast=function(e,t){clearTimeout(s);var n=document.getElementById("toast");if(!n)return;n.className="",n.classList.add("toast");var r=n.querySelector(".alert-msg"),o=n.querySelector(".close-btn"),i=function(){return function(){n.classList.remove("show"),n.classList.add("dismiss")}}();r.innerHTML=e,n.classList.add("show"),n.classList.remove("dismiss"),n.classList.add(t),o.onclick=i,s=setTimeout(i,8e3)};var a=null;function c(){clearTimeout(a)}var s=null},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntryUrlByID=function(e){return u+"/"+e};var r=t.baseUrl="http://localhost:3000",o=t.apiVersion="/api/v1",i=t.apiUrl=r+o,u=(t.userProfile=i+"/account/me",t.changePassword=i+"/account/change-password",t.reminder=i+"/account/user/reminder/settings",t.registrationEndpoint=i+"/auth/signup",t.authenticationEndpoint=i+"/auth/login",t.entriesEndpoint=i+"/entries")},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"request",value:function(){return function(e,t,n){var r={method:e,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};return localStorage.authenticationToken&&(r.headers["X-Access-Token"]=localStorage.authenticationToken),fetch(t,r).then(function(e){var t=e.status;if(401===t&&(localStorage.clear(),location.replace("sign.html")),t<400||t>=600){var n=e.headers.get("X-Access-Token");return n&&(localStorage.authenticationToken=n),Promise.resolve(e)}return Promise.resolve(e.json()).then(function(e){return Promise.reject(new Error(e.message))})}).then(function(e){return e.json()})}}()},{key:"get",value:function(){return function(e){return this.request("GET",e)}}()},{key:"post",value:function(){return function(e,t){return this.request("POST",e,t)}}()},{key:"put",value:function(){return function(e,t){return this.request("PUT",e,t)}}()}]),e}());t.default=o},88:function(e,t,n){"use strict";var r=n(1),o=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(n(6));function u(e){for(var t=!0,n=e.querySelectorAll("input"),o=n.length-1;o>=0;o-=1){var i=n[o],u=i.value;"password"!==i.type&&(u=u.trim()),""===u&&(i.className+=" invalid",t=!1,(0,r.showAlert)("Input Field(s) cannot be empty","error"),i.focus(),i.oninput=function(e){e.target.classList.remove("invalid")})}return t}function a(e){e.preventDefault();var t=document.getElementById("signupForm");if(u(t)&&function(e){var t=!0,n=e.querySelector("#match-password");if(n){var o=e.querySelector("#password");n.value!==o.value&&((0,r.showAlert)("Please input a matching password","error"),t=!1)}return t}(t)){var n=(0,r.getFieldsAsObject)(t);i.default.post(o.registrationEndpoint,n).then(function(){(0,r.showAlert)("Successful","success"),location.replace("dashboard.html")},function(e){var t=e.message;(0,r.showAlert)("Registration Failed:<br>"+t,"error")})}}function c(e){e&&e.preventDefault();var t=document.getElementById("signinForm");if(u(t)){var n=(0,r.getFieldsAsObject)(t);i.default.post(o.authenticationEndpoint,n).then(function(e){localStorage.authenticationToken=e.token,window.location.replace("dashboard.html")},function(){(0,r.showAlert)("Authentication Failed, check email or password","error")})}}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("signinForm");e&&(e.onsubmit=c);var t=document.getElementById("signupForm");t&&(t.onsubmit=a)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL2VuZHBvaW50VXJsLmpzIiwid2VicGFjazovLy8uL3VpL3NyYy9mZXRjaFdyYXBwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vdWkvc3JjL3NpZ25pbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldFZhbHVlIiwiY29udGV4dCIsImNvbnRleHRTdHIiLCJzcGxpdEFycmF5Iiwic3BsaXQiLCJjdXJyZW50Q29udGV4dCIsImxlbmd0aCIsIml0ZW0iLCJzaGlmdCIsInRyaW0iLCJfdHlwZW9mIiwicmVxdWlyZXNTdWJzdGl0dXRpb24iLCJyZWdFeCIsInN0ciIsInRlc3QiLCJnZXRTdWJzdGl0dXRlVmFsdWUiLCJyZWdleE1hdGNoIiwicGxhY2Vob2xkZXIiLCJodG1sVG9FbGVtZW50IiwiaHRtbCIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY29udGVudCIsImZpcnN0Q2hpbGQiLCJiaW5kUHJvcGVydGllc1RvRWxlbWVudCIsImRhdGFNb2RlbEVsZW1lbnRzIiwibW9kZWwiLCJoYW5kbGVyIiwidGFyZ2V0IiwiZWxlbWVudCIsImRhdGEiLCJnZXRBdHRyaWJ1dGUiLCJub2RlTmFtZSIsImZvcm1hdHRlciIsImlucHV0IiwicmVzdWx0IiwicmVwbGFjZSIsInN0b3BBbGVydFRpbWUiLCJzaG93QWxlcnQiLCJtc2ciLCJ0eXBlIiwiYWxlcnQiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsImFkZCIsIm1zZ0VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VFbGVtZW50IiwiY2xvc2VIYW5kbGVyIiwic3R5bGUiLCJkaXNwbGF5Iiwib25jbGljayIsInRpbWVyIiwic2V0VGltZW91dCIsImdldEZpZWxkc0FzT2JqZWN0IiwiZm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50Iiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJzaG93VG9hc3QiLCJjbGVhclRpbWVvdXQiLCJ0b2FzdFRpbWVyIiwicmVtb3ZlIiwiZ2V0RW50cnlVcmxCeUlEIiwiaWQiLCJlbnRyaWVzRW5kcG9pbnQiLCJiYXNlVXJsIiwiYXBpVmVyc2lvbiIsImFwaVVybCIsInVzZXJQcm9maWxlIiwiY2hhbmdlUGFzc3dvcmQiLCJyZW1pbmRlciIsInJlZ2lzdHJhdGlvbkVuZHBvaW50IiwiYXV0aGVudGljYXRpb25FbmRwb2ludCIsImh0dHAiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwiZmV0Y2hEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJsb2NhbFN0b3JhZ2UiLCJhdXRoZW50aWNhdGlvblRva2VuIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwic3RhdHVzIiwiY2xlYXIiLCJsb2NhdGlvbiIsInRva2VuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJqc29uIiwicmVqZWN0IiwiRXJyb3IiLCJtZXNzYWdlIiwidGhpcyIsInJlcXVlc3QiLCJfdXRpbCIsIl9lbmRwb2ludFVybCIsInZhbGlkYXRlRm9ybSIsInZhbGlkIiwiaW5wdXRGb3JtcyIsImlucHV0Rm9ybSIsImZvY3VzIiwib25pbnB1dCIsImUiLCJjcmVhdGVBY2NvdW50IiwicHJldmVudERlZmF1bHQiLCJtYXRjaFBhc3N3b3JkRWxlbWVudCIsInBhc3N3b3JkRWxlbWVudCIsIm1hdGNoUGFzc3dvcmQiLCJwb3N0IiwiZXJyIiwic2lnbkluIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNpZ25pbkZvcm0iLCJvbnN1Ym1pdCIsInNpZ251cEZvcm0iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEs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Q3ZDa0YsSUFDRkEsRUFBV0QsU0FBV1giLCJmaWxlIjoiYWNjb3VudC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gODgpO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGh0bWxUb0VsZW1lbnQoaHRtbCkge1xuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWwudHJpbSgpO1xuICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWUoY29udGV4dCwgY29udGV4dFN0cikge1xuICBjb25zdCBzcGxpdEFycmF5ID0gY29udGV4dFN0ci5zcGxpdCgnLicpO1xuICBsZXQgY3VycmVudENvbnRleHQgPSBjb250ZXh0O1xuICB3aGlsZSAoc3BsaXRBcnJheS5sZW5ndGgpIHtcbiAgICBjb25zdCBpdGVtID0gc3BsaXRBcnJheS5zaGlmdCgpLnRyaW0oKTtcbiAgICBpZiAodHlwZW9mIChjdXJyZW50Q29udGV4dCkgPT09ICdvYmplY3QnICYmIGl0ZW0gaW4gY3VycmVudENvbnRleHQpIHtcbiAgICAgIGN1cnJlbnRDb250ZXh0ID0gY3VycmVudENvbnRleHRbaXRlbV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY3VycmVudENvbnRleHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kUHJvcGVydGllc1RvRWxlbWVudChkYXRhTW9kZWxFbGVtZW50cywgbW9kZWwpIHtcbiAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICBjb25zdCBoYW5kbGVyID0gKHRhcmdldCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgY29uc3QgZGF0YSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0Yy1kYXRhLW1vZGVsJyk7XG4gICAgY29uc3QgdmFsdWUgPSBnZXRWYWx1ZShtb2RlbCwgZGF0YSk7XG4gICAgaWYgKGVsZW1lbnQubm9kZU5hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZSB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG4gIH07XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhTW9kZWxFbGVtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGhhbmRsZXIoZGF0YU1vZGVsRWxlbWVudHNbaV0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc1N1YnN0aXR1dGlvbihyZWdFeCwgc3RyKSB7XG4gIHJldHVybiByZWdFeC50ZXN0KHN0cik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJzdGl0dXRlVmFsdWUoY29udGV4dCkge1xuICByZXR1cm4gKHJlZ2V4TWF0Y2gsIHBsYWNlaG9sZGVyKSA9PiBnZXRWYWx1ZShjb250ZXh0LCBwbGFjZWhvbGRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXR0ZXIoaW5wdXQsIGNvbnRleHQpIHtcbiAgY29uc3QgcmVnRXggPSAve3soW157XSo/KX19L2c7XG4gIGxldCByZXN1bHQgPSBpbnB1dDtcbiAgaWYgKHJlcXVpcmVzU3Vic3RpdHV0aW9uKHJlZ0V4LCBpbnB1dCkpIHtcbiAgICByZXN1bHQgPSBpbnB1dC5yZXBsYWNlKHJlZ0V4LCBnZXRTdWJzdGl0dXRlVmFsdWUoY29udGV4dCkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmxldCB0aW1lciA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wQWxlcnRUaW1lKCkge1xuICBjbGVhclRpbWVvdXQodGltZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZywgdHlwZSkge1xuICBzdG9wQWxlcnRUaW1lKCk7XG4gIGNvbnN0IGFsZXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0Jyk7XG4gIGlmICghYWxlcnQpIHJldHVybjtcbiAgYWxlcnQuY2xhc3NOYW1lID0gJyc7XG4gIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0Jyk7XG4gIGFsZXJ0LmNsYXNzTGlzdC5hZGQodHlwZSk7XG4gIGNvbnN0IG1zZ0VsZW1lbnQgPSBhbGVydC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtbXNnJyk7XG4gIGNvbnN0IGNsb3NlRWxlbWVudCA9IGFsZXJ0LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1idG4nKTtcbiAgY29uc3QgY2xvc2VIYW5kbGVyID0gKCkgPT4ge1xuICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH07XG4gIG1zZ0VsZW1lbnQuaW5uZXJIVE1MID0gbXNnO1xuICBhbGVydC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICBjbG9zZUVsZW1lbnQub25jbGljayA9IGNsb3NlSGFuZGxlcjtcbiAgdGltZXIgPSBzZXRUaW1lb3V0KGNsb3NlSGFuZGxlciwgODAwMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZHNBc09iamVjdChmb3JtKSB7XG4gIGNvbnN0IGRhdGEgPSB7fTtcbiAgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBpbnB1dEVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gICAgZGF0YVtuYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcbiAgfSk7XG4gIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JykuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGlucHV0RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBkYXRhW25hbWVdID0gaW5wdXRFbGVtZW50Lm9wdGlvbnNbaW5wdXRFbGVtZW50LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIGRhdGE7XG59XG5cbmxldCB0b2FzdFRpbWVyID0gbnVsbDtcblxuZnVuY3Rpb24gc3RvcFRvYXN0VGltZXIoKSB7XG4gIGNsZWFyVGltZW91dCh0b2FzdFRpbWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dUb2FzdChtc2csIHR5cGUpIHtcbiAgc3RvcFRvYXN0VGltZXIoKTtcbiAgY29uc3QgYWxlcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3QnKTtcbiAgaWYgKCFhbGVydCkgcmV0dXJuO1xuICBhbGVydC5jbGFzc05hbWUgPSAnJztcbiAgYWxlcnQuY2xhc3NMaXN0LmFkZCgndG9hc3QnKTtcbiAgY29uc3QgbXNnRWxlbWVudCA9IGFsZXJ0LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC1tc2cnKTtcbiAgY29uc3QgY2xvc2VFbGVtZW50ID0gYWxlcnQucXVlcnlTZWxlY3RvcignLmNsb3NlLWJ0bicpO1xuICBjb25zdCBjbG9zZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgYWxlcnQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2Rpc21pc3MnKTtcbiAgfTtcbiAgbXNnRWxlbWVudC5pbm5lckhUTUwgPSBtc2c7XG4gIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgYWxlcnQuY2xhc3NMaXN0LnJlbW92ZSgnZGlzbWlzcycpO1xuICBhbGVydC5jbGFzc0xpc3QuYWRkKHR5cGUpO1xuXG4gIGNsb3NlRWxlbWVudC5vbmNsaWNrID0gY2xvc2VIYW5kbGVyO1xuICB0b2FzdFRpbWVyID0gc2V0VGltZW91dChjbG9zZUhhbmRsZXIsIDgwMDApO1xufVxuIiwiZXhwb3J0IGNvbnN0IGJhc2VVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJzsgLy8gJ2h0dHBzOi8vc2hpZWxkZWQtd2F0ZXJzLTk0MDA2Lmhlcm9rdWFwcC5jb20nO1xuZXhwb3J0IGNvbnN0IGFwaVZlcnNpb24gPSAnL2FwaS92MSc7XG5leHBvcnQgY29uc3QgYXBpVXJsID0gYmFzZVVybCArIGFwaVZlcnNpb247XG5leHBvcnQgY29uc3QgdXNlclByb2ZpbGUgPSBgJHthcGlVcmx9L2FjY291bnQvbWVgO1xuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkID0gYCR7YXBpVXJsfS9hY2NvdW50L2NoYW5nZS1wYXNzd29yZGA7XG5leHBvcnQgY29uc3QgcmVtaW5kZXIgPSBgJHthcGlVcmx9L2FjY291bnQvdXNlci9yZW1pbmRlci9zZXR0aW5nc2A7XG5leHBvcnQgY29uc3QgcmVnaXN0cmF0aW9uRW5kcG9pbnQgPSBgJHthcGlVcmx9L2F1dGgvc2lnbnVwYDtcbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGlvbkVuZHBvaW50ID0gYCR7YXBpVXJsfS9hdXRoL2xvZ2luYDtcbmV4cG9ydCBjb25zdCBlbnRyaWVzRW5kcG9pbnQgPSBgJHthcGlVcmx9L2VudHJpZXNgO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50cnlVcmxCeUlEKGlkKSB7XG4gIHJldHVybiBgJHtlbnRyaWVzRW5kcG9pbnR9LyR7aWR9YDtcbn1cbiIsImNsYXNzIEZldGNoV3JhcHBlciB7XG4gIHJlcXVlc3QobWV0aG9kLCB1cmwsIGJvZHkpIHtcbiAgICBjb25zdCBmZXRjaERhdGEgPSB7XG4gICAgICBtZXRob2QsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmF1dGhlbnRpY2F0aW9uVG9rZW4pIHtcbiAgICAgIGZldGNoRGF0YS5oZWFkZXJzWydYLUFjY2Vzcy1Ub2tlbiddID0gbG9jYWxTdG9yYWdlLmF1dGhlbnRpY2F0aW9uVG9rZW47XG4gICAgfVxuICAgIHJldHVybiBmZXRjaCh1cmwsIGZldGNoRGF0YSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IHJlcztcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgnc2lnbi5odG1sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cyA8IDQwMCB8fCBzdGF0dXMgPj0gNjAwKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW4gPSByZXMuaGVhZGVycy5nZXQoJ1gtQWNjZXNzLVRva2VuJyk7XG4gICAgICAgICAgaWYgKHRva2VuKSBsb2NhbFN0b3JhZ2UuYXV0aGVudGljYXRpb25Ub2tlbiA9IHRva2VuO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcy5qc29uKCkpLnRoZW4oZGF0YSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoZGF0YS5tZXNzYWdlKSkpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbiAgfVxuXG4gIGdldCh1cmwpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdHRVQnLCB1cmwpO1xuICB9XG5cbiAgcG9zdCh1cmwsIGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQT1NUJywgdXJsLCBkYXRhKTtcbiAgfVxuXG4gIHB1dCh1cmwsIGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQVVQnLCB1cmwsIGRhdGEpO1xuICB9XG59XG5cbmNvbnN0IGh0dHAgPSBuZXcgRmV0Y2hXcmFwcGVyKCk7XG5leHBvcnQgZGVmYXVsdCBodHRwO1xuIiwiaW1wb3J0IHsgZ2V0RmllbGRzQXNPYmplY3QsIHNob3dBbGVydCB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBhdXRoZW50aWNhdGlvbkVuZHBvaW50LCByZWdpc3RyYXRpb25FbmRwb2ludCB9IGZyb20gJy4vZW5kcG9pbnRVcmwnO1xuaW1wb3J0IGh0dHAgZnJvbSAnLi9mZXRjaFdyYXBwZXInO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZm9ybSkge1xuICBsZXQgdmFsaWQgPSB0cnVlO1xuICBjb25zdCBpbnB1dEZvcm1zID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICBmb3IgKGxldCBpID0gaW5wdXRGb3Jtcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IGlucHV0Rm9ybSA9IGlucHV0Rm9ybXNbaV07XG4gICAgbGV0IHsgdmFsdWUgfSA9IGlucHV0Rm9ybTtcbiAgICBpZiAoaW5wdXRGb3JtLnR5cGUgIT09ICdwYXNzd29yZCcpIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgIGlucHV0Rm9ybS5jbGFzc05hbWUgKz0gJyBpbnZhbGlkJztcbiAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICBzaG93QWxlcnQoJ0lucHV0IEZpZWxkKHMpIGNhbm5vdCBiZSBlbXB0eScsICdlcnJvcicpO1xuICAgICAgaW5wdXRGb3JtLmZvY3VzKCk7XG4gICAgICBpbnB1dEZvcm0ub25pbnB1dCA9IChlKSA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gbWF0Y2hQYXNzd29yZChmb3JtKSB7XG4gIGxldCB2YWxpZCA9IHRydWU7XG4gIGNvbnN0IG1hdGNoUGFzc3dvcmRFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjbWF0Y2gtcGFzc3dvcmQnKTtcbiAgaWYgKG1hdGNoUGFzc3dvcmRFbGVtZW50KSB7XG4gICAgY29uc3QgcGFzc3dvcmRFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGFzc3dvcmQnKTtcbiAgICBpZiAobWF0Y2hQYXNzd29yZEVsZW1lbnQudmFsdWUgIT09IHBhc3N3b3JkRWxlbWVudC52YWx1ZSkge1xuICAgICAgc2hvd0FsZXJ0KCdQbGVhc2UgaW5wdXQgYSBtYXRjaGluZyBwYXNzd29yZCcsICdlcnJvcicpO1xuICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufVxuLy9cbi8vIGZ1bmN0aW9uIHRvSlNPTlN0cmluZyhmb3JtKSB7XG4vLyAgIGNvbnN0IG9iaiA9IHt9O1xuLy8gICBjb25zdCBlbGVtZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnKTtcbi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuLy8gICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbi8vICAgICBjb25zdCB7bmFtZX0gPSBlbGVtZW50O1xuLy8gICAgIGxldCB7dmFsdWV9ID0gZWxlbWVudDtcbi8vICAgICBpZiAoZWxlbWVudC50eXBlID09PSAnY2hlY2tib3gnKSB7XG4vLyAgICAgICB2YWx1ZSA9IGVsZW1lbnQuY2hlY2tlZDtcbi8vICAgICB9XG4vL1xuLy8gICAgIGlmIChuYW1lKSB7XG4vLyAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZTtcbi8vICAgICB9XG4vLyAgIH1cbi8vICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG4vLyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZUFjY291bnQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwRm9ybScpO1xuICBpZiAodmFsaWRhdGVGb3JtKGZvcm0pICYmIG1hdGNoUGFzc3dvcmQoZm9ybSkpIHtcbiAgICBjb25zdCBkYXRhID0gZ2V0RmllbGRzQXNPYmplY3QoZm9ybSk7XG4gICAgaHR0cC5wb3N0KHJlZ2lzdHJhdGlvbkVuZHBvaW50LCBkYXRhKS50aGVuKCgpID0+IHtcbiAgICAgIHNob3dBbGVydCgnU3VjY2Vzc2Z1bCcsICdzdWNjZXNzJyk7XG4gICAgICBsb2NhdGlvbi5yZXBsYWNlKCdkYXNoYm9hcmQuaHRtbCcpO1xuICAgIH0sIChlcnIpID0+IHtcbiAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gZXJyO1xuICAgICAgc2hvd0FsZXJ0KGBSZWdpc3RyYXRpb24gRmFpbGVkOjxicj4ke21lc3NhZ2V9YCwgJ2Vycm9yJyk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2lnbkluKGUpIHtcbiAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduaW5Gb3JtJyk7XG4gIGlmICh2YWxpZGF0ZUZvcm0oZm9ybSkpIHtcbiAgICAvLyBjb25zdCBmb3JtSnNvbiA9IHRvSlNPTlN0cmluZyhmb3JtKTtcbiAgICBjb25zdCBkYXRhID0gZ2V0RmllbGRzQXNPYmplY3QoZm9ybSk7XG4gICAgaHR0cC5wb3N0KGF1dGhlbnRpY2F0aW9uRW5kcG9pbnQsIGRhdGEpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLmF1dGhlbnRpY2F0aW9uVG9rZW4gPSByZXMudG9rZW47XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnZGFzaGJvYXJkLmh0bWwnKTtcbiAgICB9LCAoKSA9PiB7XG4gICAgICBzaG93QWxlcnQoJ0F1dGhlbnRpY2F0aW9uIEZhaWxlZCwgY2hlY2sgZW1haWwgb3IgcGFzc3dvcmQnLCAnZXJyb3InKTtcbiAgICB9KTtcbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBzaWduaW5Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25pbkZvcm0nKTtcbiAgaWYgKHNpZ25pbkZvcm0pIHtcbiAgICBzaWduaW5Gb3JtLm9uc3VibWl0ID0gc2lnbkluO1xuICB9XG4gIGNvbnN0IHNpZ251cEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwRm9ybScpO1xuICBpZiAoc2lnbnVwRm9ybSkge1xuICAgIHNpZ251cEZvcm0ub25zdWJtaXQgPSBjcmVhdGVBY2NvdW50O1xuICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=